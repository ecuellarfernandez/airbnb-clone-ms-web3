<div class="admin-claims-page card">
  <div class="cardHeader">
    <h2>Claims (Permisos)</h2>
<button class="btn-add" (click)="onAddClaim()">Agregar nuevo claim</button>
  </div>

  <div *ngIf="isLoading" class="loading">Cargando...</div>
  <div *ngIf="!(claims$ | async)?.length && !isLoading" class="empty">No hay claims.</div>

  <table *ngIf="claims$ | async as claims" class="claims-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Valor</th>
        <th>Descripción</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let claim of claims; trackBy: trackByClaimId">
        <td>{{ claim.id }}</td>
        <td>{{ claim.key || claim.name || claim.claim }}</td>
        <td>{{ claim.active }}</td>
        <td>{{ claim.description }}</td>
        <td>
          <button class="btn-edit" (click)="onEditClaim(claim)">Editar</button>
          <button class="btn-delete" (click)="onDeleteClaim(claim.id)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <button (click)="prev()" [disabled]="pageNumber === 0">Anterior</button>
    <span class="page-info">Página {{ pageNumber + 1 }} / {{ totalPages || 1 }}</span>
    <button (click)="next()" [disabled]="pageNumber + 1 >= (totalPages || 1)">Siguiente</button>

    <label class="page-size">
      Mostrar
      <select [value]="pageSize" (change)="onPageSizeChange($any($event.target).value)">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
      </select>
      por página
    </label>

    <div class="total">Total: {{ totalElements }}</div>
  </div>
</div>

<app-admin-create-form
  *ngIf="showCreateModel"
  (submit)="handleCreateClaim($event)"
  (cancel)="handleCancelCreate()"
></app-admin-create-form>

<app-admin-create-form
  *ngIf="editClaim"
  [initialClaim]="editClaim"
  (submit)="handleEditClaim($event)"
  (cancel)="handleCancelEdit()"
></app-admin-create-form>
